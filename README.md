# ğŸ¤– Multi-Agent PR Review System

> âš ï¸ **IMPORTANT NOTE:** This version is **fully experimental** and released as a
test project. Expect breaking changes and use it for evaluation purposes only.

[![GitHub Action](https://img.shields.io/badge/GitHub%20Action-Marketplace-blue)](https://github.com/marketplace/actions/multi-agent-pr-review)
[![License](https://img.shields.io/badge/License-MIT-green)](LICENSE)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](CONTRIBUTING.md)

> **Turn your Pull Requests into high-quality code with the power of Multi-Agent AI.**

This GitHub Action deploys a team of specialized AI agents to review your code. It goes beyond simple linting by understanding logic, architectural changes, and style nuances, providing a comprehensive report directly in your Pull Request.

---

## ğŸš€ Features

* **ğŸ•µï¸ Logic Analysis**: Detects logical errors, security vulnerabilities, and edge cases.
* **ğŸ¨ Style & Convention**: Checks for PEP8 and project-specific conventions (smartly ignoring minor line-length issues).
* **ğŸ—ï¸ Architectural Insights**: Generates **Mermaid diagrams** to visualize class hierarchy and structural changes.
* **ğŸ“ Comprehensive Reporting**: Posts a single, organized comment with:
    * Executive Summary
    * Categorized Issues (Critical/High/Medium)
    * Code snippets with fixes
    * Clear "Approval" or "Request Changes" status.
* **âš¡ Dual-Model Strategy**: Uses a "Fast" model for simple tasks and a "Heavy" reasoning model for complex logic to optimize costs and speed.

---

## ğŸ› ï¸ Quick Start

To use this Action, create a new workflow file in your repository at `.github/workflows/ai_review.yml`.

### Basic Configuration

```yaml
name: AI PR Review

on:
  pull_request:
    types: [opened, synchronize, reopened]

permissions:
  contents: read
  pull-requests: write
  issues: write

jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Run Multi-Agent Review
        uses: your-username/your-repo-name@v1  # <-- REPLACE WITH YOUR REPO PATH
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          LLM_API_KEY: ${{ secrets.LLM_API_KEY }} # Required for the AI Model
        with:
          MODEL_HEAVY: "llama-3-70b"
          MODEL_FAST: "llama-3-8b"
```

---

## âš™ï¸ Inputs & Configuration

You can customize the behavior of the agents using the following inputs in the `with` block:

| Input | Description | Required | Default |
| :--- | :--- | :---: | :--- |
| `MODEL_HEAVY` | The model ID used for complex logic, orchestration, and architecture analysis. | No | `llama-3-70b` |
| `MODEL_FAST` | The model ID used for style checks and simple formatting. | No | `llama-3-8b` |
| `MAX_DIFF_TOKENS` | Maximum number of tokens to process per file (prevents context overflow). | No | `6000` |

### Environment Variables (Secrets)

To ensure the Action can read your code and post comments, you must provide these environment variables:

* **`GITHUB_TOKEN`**: Automatically provided by GitHub, but must be explicitly passed in `env`.
* **`LLM_API_KEY`**: Your API key for the LLM provider (e.g., OpenAI, Groq, Anthropic). Add this to your repository secrets (`Settings > Secrets and variables > Actions`).

---

## ğŸ“‹ What the Output Looks Like

After the Action runs, you will see a comment on your PR similar to this:

> ### ğŸ¤– AI Review Report
>
> **Status:** âŒ **Request Changes**
>
> #### ğŸš¨ Critical Issues
> - **Security:** Potential SQL injection found in `auth.py` at line 45.
> - **Logic:** Infinite loop detected in `process_data()` when list is empty.
>
> #### ğŸ¨ Style & Best Practices
> - `utils.py`: Variable naming is inconsistent with PEP8.
>
> #### ğŸ—ï¸ Architecture Changes
> ```mermaid
> classDiagram
>    class AuthManager {
>       +login()
>       +logout()
>    }
>    AuthManager <|-- OAuthProvider
> ```
>
> *Generated by Multi-Agent System*

---

## â“ FAQ

**Q: Which LLM providers are supported?**
A: This Action supports any provider compatible with LangChain/OpenAI format. Ensure you set the correct API base URL if using a custom provider.

**Q: Does this replace human review?**
A: No. It is designed to be a "First Pass" reviewer. It catches obvious errors and architectural drifts, allowing human reviewers to focus on high-level business logic.

**Q: Why do I need `permissions: write`?**
A: The Action needs permission to post the review comment on the Pull Request.

---

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.